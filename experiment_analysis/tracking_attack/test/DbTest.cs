using Xunit;


    
public class DbTest
{
    [Fact]
    public void TestDbConn()
    {
        DB_Connector x = new DB_Connector();
        int nrOfPaths = 57947;
        var path1 = x.GetAllPaths()[0];
        Coord c1 = path1[0];
        Coord c2 = new Coord(40.7903666,116.736645,0);
        
        Assert.True(c1.Lat == c2.Lat );
    }

    [Fact]
    public void TestStringToCoordList()
    {
        DB_Connector x = new DB_Connector();
        string t = "40.7903666,116.736645,0||40.7903916,116.7367483,1||40.7904283,116.7368449,2||40.7904666,116.7369483,3||40.7905049,116.73705,4||40.7905433,116.7371666,5||40.7905916,116.7372866,6||40.7906316,116.7374183,7||40.7906716,116.7375483,8||40.7907249,116.7376666,9||40.790765,116.7377949,10||40.7908116,116.73792,11||40.7908533,116.7380383,12||40.7909083,116.73814,13||40.7909516,116.7382483,14||40.7909949,116.7383549,15||40.7910349,116.7384632,16||40.7910749,116.738565,17||40.7911166,116.7386616,18||40.7912049,116.7388216,20||40.7912932,116.7389783,22||40.7913399,116.7390599,23||40.7913366,116.7391583,24||40.7913749,116.7392616,25||40.79142,116.73936,26||40.7914616,116.7394633,27||40.7915133,116.7395499,28||40.7915566,116.73964,29||40.7915983,116.7397299,30||40.791685,116.7398816,32||40.7917783,116.7400316,34||40.7918266,116.7401133,35||40.7918682,116.7401983,36||40.7919149,116.7402799,37||40.7919666,116.7403633,38||40.7920116,116.7404433,39||40.7921033,116.740565,41||40.7921849,116.7407099,43||40.7922933,116.74086,45||40.7923483,116.7409432,46||40.7923983,116.7410316,47||40.7924533,116.7411299,48||40.7925099,116.7412316,49||40.7925599,116.7413416,50||40.7926233,116.7414516,51||40.7926849,116.7415566,52||40.7927449,116.74166,53||40.7928016,116.7417583,54||40.7928449,116.7418516,55||40.7928966,116.7419316,56||40.7929383,116.7420966,58||40.7929799,116.7422416,60||40.79295,116.7423316,61||40.7929533,116.7425099,63||40.7929733,116.7426,64||40.7929999,116.742695,65||40.7930533,116.74278,66||40.7931016,116.7428632,67||40.7931983,116.7429933,69||40.7932533,116.7430766,71||";
        Coord c = new Coord(40.7903666,116.736645,0);
        var z  = x.coordsStringToList(t)[0];
        Assert.True(z.Lat == c.Lat);
    }
    [Fact]
    public void TestInitNodesWithPos()
    {
        DB_Connector con = new DB_Connector();
        
        //node id = 0    has pos 40.2915052488617|116.299723355816
        Coord c1 = new Coord(40.2915052488617, 116.299723355816, -1);
        var x = con.initFogNodesWithPositions();
        Coord c2 =  x[0].Position;
        Assert.True(c1.Lat - c2.Lat < 0.000001);  //some rounding error might occur
    }



}
